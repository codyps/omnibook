diff -Nru linux-2.6.15/arch/i386/Kconfig linux-2.6.15-omnibook/arch/i386/Kconfig
--- linux-2.6.15/arch/i386/Kconfig	2006-01-03 04:21:10.000000000 +0100
+++ linux-2.6.15-omnibook/arch/i386/Kconfig	2006-03-12 22:49:21.251157801 +0100
@@ -320,6 +320,42 @@
 	  Say Y if you intend to run this kernel on a Toshiba portable.
 	  Say N otherwise.
 
+config OMNIBOOK
+	tristate "HP (omnibook) laptop support"
+	help
+          This adds a driver to support some features of laptops manufactured
+          by Compal Electronics, Inc as ODM such as HP OmniBook, Pavilion,
+          Compal ACL00 and Toshiba Satellite (wich have Pheonix BIOS and is
+          not supported by Toshiba driver) and Acer Aspire series laptops.
+
+          For this driver see the site at: <http://www.sf.net/projects/omke/>.
+
+          Say Y if you intend to run this kernel on a supported portable.
+          Say N otherwise.
+
+          This driver is also available as a module ( = code which can be
+          inserted in and removed from the running kernel whenever you want).
+          If you want to compile it as a module, say M here and read
+          Documentation/modules.txt.
+          The module is called omnibook.ko because originally it was intended
+          to support HP OmniBooks only.
+
+config OMNIBOOK_APMEMU
+	bool "HP omnibook APM emulation"
+	depends on OMNIBOOK
+	help
+	  Enable APM emulation by default in the omnibook module. This is
+ 	  mainly for laptops that don't have perfect ACPI support for battery
+	  level monitoring.
+
+config OMNIBOOK_BACKLIGHT
+	bool "HP omnibook backlight support"
+	depends on OMNIBOOK
+	select BACKLIGHT_CLASS_DEVICE
+	help
+	  Enable registration of the omnibook module as a backlight device.
+	  This allow query and control of the LCD brightness via sysfs.
+
 config I8K
 	tristate "Dell laptop support"
 	---help---
diff -Nru linux-2.6.15/drivers/misc/Makefile linux-2.6.15-omnibook/drivers/misc/Makefile
--- linux-2.6.15/drivers/misc/Makefile	2006-01-03 04:21:10.000000000 +0100
+++ linux-2.6.15-omnibook/drivers/misc/Makefile	2006-03-12 22:39:59.517415488 +0100
@@ -5,3 +5,5 @@
 
 obj-$(CONFIG_IBM_ASM)	+= ibmasm/
 obj-$(CONFIG_HDPU_FEATURES)	+= hdpuftrs/
+obj-$(CONFIG_OMNIBOOK) += omnibook/
+
diff -Nru linux-2.6.15/drivers/misc/omnibook/Makefile linux-2.6.15-omnibook/drivers/misc/omnibook/Makefile
--- linux-2.6.15/drivers/misc/omnibook/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.15-omnibook/drivers/misc/omnibook/Makefile	2006-03-12 22:43:34.087553100 +0100
@@ -0,0 +1,27 @@
+
+# Makefile -- makefile for the HP OmniBook support module
+
+# This program is free software; you can redistribute it and/or modify it
+# under the terms of the GNU General Public License as published by the
+# Free Software Foundation; either version 2, or (at your option) any
+# later version.
+#
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+# General Public License for more details.
+#
+# Written by Soós Péter <sp@osb.hu>, 2002-2004
+#
+# Note! Dependencies are done automagically by 'make dep', which also
+# removes any old dependencies. DON'T put your own dependencies here
+# unless it's something special (ie not a .c file).
+#
+# Note 2! The CFLAGS definitions are now in the main makefile...
+
+obj-$(CONFIG_OMNIBOOK) += omnibook.o
+
+omnibook-objs := ac.o battery.o blank.o display.o dock.o ec.o fan.o \
+fan_policy.o init.o lcd.o onetouch.o temperature.o touchpad.o dump.o info.o \
+watch.o apmemu.o
+ 
